"use strict";(self.webpackChunkmobilecourse=self.webpackChunkmobilecourse||[]).push([[3168],{5633:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var t=s(4848),c=s(8453);const o={title:"Contacts",sidebar_position:4},a=void 0,i={id:"ExpoSDK/contacts",title:"Contacts",description:"EXPO Contacts",source:"@site/docs/ExpoSDK/contacts.md",sourceDirName:"ExpoSDK",slug:"/ExpoSDK/contacts",permalink:"/mobilecourse/docs/ExpoSDK/contacts",draft:!1,unlisted:!1,editUrl:"https://github.com/haagahelia/mobileprogramming.git/docs/ExpoSDK/contacts.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Contacts",sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Camera",permalink:"/mobilecourse/docs/ExpoSDK/camera"},next:{title:"UI Libraries",permalink:"/mobilecourse/docs/category/ui-libraries"}},r={},d=[{value:"EXPO Contacts",id:"expo-contacts",level:3},{value:"EXPO SMS",id:"expo-sms",level:3}];function l(e){const n={a:"a",code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h3,{id:"expo-contacts",children:"EXPO Contacts"}),"\n",(0,t.jsxs)(n.p,{children:["EXPO Contacts (",(0,t.jsx)(n.a,{href:"https://docs.expo.dev/versions/latest/sdk/contacts/",children:"https://docs.expo.dev/versions/latest/sdk/contacts/"}),") can be used to get access your device\u2019s contacts. First, you have to install ",(0,t.jsx)(n.code,{children:"expo-contacts"})," using the following command in your app directory."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx expo install expo-contacts \n"})}),"\n",(0,t.jsx)(n.p,{children:"In the following example, we create an app that fetch phone number from the contacts and send sms message to this number."}),"\n",(0,t.jsxs)(n.p,{children:["First, we have to import the ",(0,t.jsx)(n.code,{children:"expo-contacts"})," and ",(0,t.jsx)(n.code,{children:"expo-sms"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import * as Contacts from 'expo-contacts';\nimport * as SMS from 'expo-sms';\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Next, we check permission to be able to access the device\u2019s contacts. The  ",(0,t.jsx)(n.code,{children:"requestPermissionsAsync()"})," function is called to request permission to access the contacts on the user's device. It returns a promise that resolves to a ",(0,t.jsx)(n.code,{children:"PermissionResponse"})," object. We destruct the resolved object to extract the ",(0,t.jsx)(n.code,{children:"status"})," property."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const { status } = await Contacts.requestPermissionsAsync();\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The value of ",(0,t.jsx)(n.code,{children:"status"})," is ",(0,t.jsx)(n.code,{children:"granted"})," if user has granted the permission."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"if (status === 'granted') {\n  // Access contacts\xa0\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"getContactsAsync(query)"})," method is used to get contacts from your device and it is asynchronous. The ",(0,t.jsx)(n.code,{children:"query"})," is an optional object that can contain properties to filter and sort the contacts. The ",(0,t.jsx)(n.code,{children:"getContactsAsync"})," method returns a promise that resolves to a ",(0,t.jsx)(n.code,{children:"ContactResponse"})," object. The object contains ",(0,t.jsx)(n.code,{children:"data"})," property that is an array of contacts that match a given query."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const getContacts = async () => {\n  const { status } = await Contacts.requestPermissionsAsync();\n  if (status === 'granted') {\n    const { data } = await Contacts.getContactsAsync(\n      { fields: [Contacts.Fields.PhoneNumbers] }\n    );\n   }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In the function's ",(0,t.jsx)(n.code,{children:"query"}),", we define that we want to get phone numbers. You can also use for example, ",(0,t.jsx)(n.code,{children:"Contacts.Fields.Emails"})," to get email addresses. Then, we can check if there are contacts available, and save the first contact object to a state."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const [contact, setContact] = useState({});\n\nconst getContacts = async () => {\n  const { status } = await Contacts.requestPermissionsAsync();\n  if (status === 'granted') {\n    const\xa0{ data } = await Contacts.getContactsAsync(\n      { fields: [Contacts.Fields.PhoneNumbers] }\n    );\n    if (data.length > 0) {\n      setContact(data[0]);\n    }\n  }\n}\n\n"})}),"\n",(0,t.jsx)(n.p,{children:"Contact object looks the following (Android)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'Object {\n  "contactType": "person",\n  "firstName": "Lisa",\n  "id": "1",\n  "imageAvailable": false,\n  "lastName": "Smith",\n  "lookupKey": "0r1-3B5137293739433D513F29",\n  "name": "Lisa Smith",\n  "phoneNumbers": Array [\n    Object {\n      "id": "1",\n      "isPrimary": 0,\n      "label": "mobile",\n      "number": "1 234-566-985",\n      "type": "2",\n    },\n  ],\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"return"})," statement, we add the ",(0,t.jsx)(n.code,{children:"Button"})," and ",(0,t.jsx)(n.code,{children:"Text"})," components. The button execute the ",(0,t.jsx)(n.code,{children:"getContacts"})," function and the name of the first contact is displayed in the ",(0,t.jsx)(n.code,{children:"Text"})," component."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsx",children:'return (\n  <View style={styles.container}>\n    <Text>{contact.name}</Text>\n    <Button title="Get Contact" onPress={getContacts} />\n  </View>\n);\n'})}),"\n",(0,t.jsx)(n.p,{children:"Now, You should see the first contact\u2019s name when you press the button."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(7304).A+"",width:"300",height:"616"})}),"\n",(0,t.jsx)(n.h3,{id:"expo-sms",children:"EXPO SMS"}),"\n",(0,t.jsxs)(n.p,{children:["EXPO SMS (",(0,t.jsx)(n.a,{href:"https://docs.expo.dev/versions/latest/sdk/sms/",children:"https://docs.expo.dev/versions/latest/sdk/sms/"}),") can be used to get access to device\u2019s SMS messages. You can install it by typing the following command in your app directory."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npx expo install expo-sms \n"})}),"\n",(0,t.jsxs)(n.p,{children:["Next, we will implement function to send SMS message to the contact.\nThe ",(0,t.jsx)(n.code,{children:"isAvailableAsync()"})," method can be used to check if SMS is available in a device."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const sendSms = async () => {\n  const isSMSAvailable = await SMS.isAvailableAsync();\n  \n  if (isSMSAvailable) {\n    // Send a message\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The SMS message can be sent using the ",(0,t.jsx)(n.code,{children:"sendSMSAsync(addresses, message, options)"})," method. The first argument is an array of phone numbers and the second argument is a message to be sent. The third optional argument can be used to define additional SMS configuration options. The ",(0,t.jsx)(n.code,{children:"sendSMSAsync"}),"returns a promise that resolves to an object containing the result of the SMS sending operation (sent, cancelled, unknown)."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const sendSms = async () => {\n  const isSMSAvailable = await SMS.isAvailableAsync();\n\n  if (isSMSAvailable && contact.phoneNumbers.length > 0) {\n    const { result } = await SMS.sendSMSAsync([contact.phoneNumbers[0].number], \n      'Hello ' + contact.name);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Finally, we add a button to send SMS message."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'return (\n  <View style={styles.container}>\n    <Text>{contact.name}</Text>\n    <Button title="Get Contact" onPress={getContacts} />\n    <Button title="Send SMS" onPress={sendSms} />\n  </View>\n);\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(6440).A+"",width:"300",height:"616"})})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},7304:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/contacts-47e6b8186a951a73ab7107dc56031148.png"},6440:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/sms-f64b22b498ec8cb83778089dff7fb1da.png"},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>i});var t=s(6540);const c={},o=t.createContext(c);function a(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);