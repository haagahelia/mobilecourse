"use strict";(self.webpackChunkmobilecourse=self.webpackChunkmobilecourse||[]).push([[6380],{5068:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"Maps/location","title":"Location","description":"The Expo Location (expo-location) allows to read geolocation data from the device (https://docs.expo.dev/versions/latest/sdk/location).","source":"@site/docs/Maps/location.md","sourceDirName":"Maps","slug":"/Maps/location","permalink":"/mobilecourse/docs/Maps/location","draft":false,"unlisted":false,"editUrl":"https://github.com/haagahelia/mobileprogramming.git/docs/Maps/location.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Location","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"React Native Maps","permalink":"/mobilecourse/docs/Maps/"},"next":{"title":"Data Persistence","permalink":"/mobilecourse/docs/category/data-persistence"}}');var s=o(4848),i=o(8453);const c={title:"Location",sidebar_position:2},a=void 0,r={},l=[];function d(e){const t={a:"a",code:"code",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["The Expo Location (",(0,s.jsx)(t.code,{children:"expo-location"}),") allows to read geolocation data from the device (",(0,s.jsx)(t.a,{href:"https://docs.expo.dev/versions/latest/sdk/location",children:"https://docs.expo.dev/versions/latest/sdk/location"}),")."]}),"\n",(0,s.jsxs)(t.p,{children:["Install the ",(0,s.jsx)(t.code,{children:"expo-location"})," library"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"npx expo install expo-location\n"})}),"\n",(0,s.jsx)(t.p,{children:"Import Location to your Component. When using Location we have to check permission  (access to geolocation, contacts etc.)."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"import * as Location from 'expo-location';\n\nexport default function App() {\n  const [location, setLocation] = useState(null); // State where location is saved\n \n  useEffect(() => {\n    // Get location\n  }, []);\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Certain functionalities requires users permission. App permissions help support user privacy by protecting access to the restricted data (system state and users' contact informatio, etc.) and restricted actions, such as getting device location and recording audio."}),"\n",(0,s.jsxs)(t.p,{children:["We have to check the permission first using the ",(0,s.jsx)(t.code,{children:"useEffect()"})," hook. We use the ",(0,s.jsx)(t.code,{children:"requestForegroundPermissionsAsync()"})," method to check if permission for location usage is granted."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"useEffect(()\xa0=>\xa0{\n\xa0\xa0(async\xa0()\xa0=>\xa0{\n\xa0\xa0\xa0\xa0let\xa0{\xa0status\xa0}\xa0=\xa0await\xa0Location.requestForegroundPermissionsAsync();\n\xa0\xa0\xa0\xa0if\xa0(status\xa0!==\xa0'granted')\xa0{\n\xa0\xa0\xa0\xa0\xa0\xa0Alert.alert('No\xa0permission\xa0to\xa0get\xa0location')\n\xa0\xa0\xa0\xa0\xa0\xa0return;\n\xa0\xa0\xa0\xa0}\n    // Get location\n\xa0\xa0})();\n},\xa0[]);\n"})}),"\n",(0,s.jsx)(t.p,{children:"Now, if you open the app in your device, you will see the permission dialog."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:o(2581).A+"",width:"260",height:"533"})}),"\n",(0,s.jsxs)(t.p,{children:["Next, we use the ",(0,s.jsx)(t.code,{children:"getCurrentPositionAsync(options)"})," method to get user's current location. The ",(0,s.jsx)(t.code,{children:"options"})," parameter can be used to set desired accuracy, timeout duration, etc. If not provided, default settings will be used."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"useEffect(()\xa0=>\xa0{\n\xa0\xa0(async\xa0()\xa0=>\xa0{\n\xa0\xa0\xa0\xa0let\xa0{\xa0status\xa0}\xa0=\xa0await\xa0Location.requestForegroundPermissionsAsync();\n\xa0\xa0\xa0\xa0if\xa0(status\xa0!==\xa0'granted')\xa0{\n\xa0\xa0\xa0\xa0\xa0\xa0Alert.alert('No\xa0permission\xa0to\xa0get\xa0location')\n\xa0\xa0\xa0\xa0\xa0\xa0return;\n\xa0\xa0\xa0\xa0}\n    let\xa0location\xa0=\xa0await\xa0Location.getCurrentPositionAsync({});\n    setLocation(location);\n\xa0\xa0})();\n},\xa0[]);\n"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"getCurrentPositionAsync()"})," returns an object ",(0,s.jsx)(t.code,{children:"coords"})," that contains attributes like latitude, longitude, altitude, speed etc."]})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2581:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/permission-03f782b2b3bcf231a88e2e0f23235506.png"},8453:(e,t,o)=>{o.d(t,{R:()=>c,x:()=>a});var n=o(6540);const s={},i=n.createContext(s);function c(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);