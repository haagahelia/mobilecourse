"use strict";(self.webpackChunkmobilecourse=self.webpackChunkmobilecourse||[]).push([[1866],{5033:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var s=a(4848),n=a(8453);const i={title:"Firebase",sidebar_position:3},r=void 0,o={id:"DataPersistence/firebase",title:"Firebase",description:"Firebase (https://firebase.google.com/) is a platform developed by Google that provides a variety of tools and services for building and managing mobile and web applications.",source:"@site/docs/DataPersistence/firebase.md",sourceDirName:"DataPersistence",slug:"/DataPersistence/firebase",permalink:"/mobilecourse/docs/DataPersistence/firebase",draft:!1,unlisted:!1,editUrl:"https://github.com/haagahelia/mobileprogramming.git/docs/DataPersistence/firebase.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Firebase",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"SQLite",permalink:"/mobilecourse/docs/DataPersistence/sqlite"},next:{title:"Expo SDK",permalink:"/mobilecourse/docs/category/expo-sdk"}},c={},d=[{value:"Installation",id:"installation",level:3},{value:"Shopping List",id:"shopping-list",level:3},{value:"Create Expo project",id:"create-expo-project",level:4},{value:"Create Firebase Project",id:"create-firebase-project",level:4},{value:"Initialize Firebase",id:"initialize-firebase",level:4},{value:"Shopping App",id:"shopping-app",level:4},{value:"Read More",id:"read-more",level:3}];function l(e){const t={a:"a",code:"code",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Firebase"})," (",(0,s.jsx)(t.a,{href:"https://firebase.google.com/",children:"https://firebase.google.com/"}),") is a platform developed by Google that provides a variety of tools and services for building and managing mobile and web applications."]}),"\n",(0,s.jsxs)(t.p,{children:["Firebase provides ",(0,s.jsx)(t.strong,{children:"Realtime Database"})," that is NoSQL cloud database. Data is stored as JSON and synchronized in realtime to every connected client."]}),"\n",(0,s.jsxs)(t.p,{children:["To use the Firebase Realtime Database with React Native, you can use ",(0,s.jsx)(t.strong,{children:"Firebase JavaScript SDK"})," or ",(0,s.jsx)(t.strong,{children:"React Native Firebase"}),". In this material, we are using the JavaScript SDK (",(0,s.jsx)(t.a,{href:"https://firebase.google.com/docs/database/web/start",children:"https://firebase.google.com/docs/database/web/start"}),")."]}),"\n",(0,s.jsx)(t.h3,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(t.p,{children:"You can install Firebase JavaScript SDK using the following command:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npx expo install firebase\n"})}),"\n",(0,s.jsxs)(t.p,{children:["See also step 3: ",(0,s.jsx)(t.strong,{children:"Configure Metro"})," in ",(0,s.jsx)(t.a,{href:"https://docs.expo.dev/guides/using-firebase/",children:"https://docs.expo.dev/guides/using-firebase/"})]}),"\n",(0,s.jsx)(t.h3,{id:"shopping-list",children:"Shopping List"}),"\n",(0,s.jsxs)(t.p,{children:["Next, we will implement a simple Shopping list app where users can enter products (title and amount) and save them to the Firebase Realtime Database. Products will be listed using the ",(0,s.jsx)(t.code,{children:"FlatList"})," component."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:a(9444).A+"",width:"327",height:"276"})}),"\n",(0,s.jsx)(t.h4,{id:"create-expo-project",children:"Create Expo project"}),"\n",(0,s.jsx)(t.p,{children:"Create a new Expo project and install Firebase JavaScript SDK."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npx create-expo-app shoppinglist\ncd shoppinglist\nnpx expo install firebase\n"})}),"\n",(0,s.jsx)(t.h4,{id:"create-firebase-project",children:"Create Firebase Project"}),"\n",(0,s.jsx)(t.p,{children:"To use Firebase, we have to create a project in Firebase."}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsxs)(t.p,{children:["Sign up to Firebase (",(0,s.jsx)(t.a,{href:"https://firebase.google.com/",children:"https://firebase.google.com/"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Create a new Firebase project and create new realtime database (Build menu)."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:a(5279).A+"",width:"561",height:"453"})}),"\n",(0,s.jsxs)(t.p,{children:["In the Security Rules, you can select ",(0,s.jsx)(t.strong,{children:"Start in test mode"}),". You can change security rules later in Realtime Database -> ",(0,s.jsx)(t.strong,{children:"Rules"})," tab."]}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsxs)(t.li,{children:["Add new App to you Firebase project (",(0,s.jsx)(t.strong,{children:"Web app"}),")"]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:a(6205).A+"",width:"314",height:"295"})}),"\n",(0,s.jsx)(t.p,{children:"Now, you can get the initialization code in the App registration phase. Copy the initialization, we will need that later:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'// Import the functions you need from the SDKs you need\nimport { initializeApp } from \'firebase/app\';\n\n// Your web app\'s Firebase configuration\nconst firebaseConfig = {\n  apiKey: "AIzjSyA8Bh7rwerN4OGbVLedJ54hjWj6FHP3fqpegwQ",\n  authDomain: "shoppingapp-91ahe.firebaseapp.com",\n  databaseURL: "https://shoppingapp-91-rtdb.us-west1.firebasedatabase.app",\n  projectId: "shoppingapp-91ede",\n  storageBucket: "shoppingapp-91ede.appspot.com",\n  messagingSenderId: "1056464134052",\n  appId: "1:10864638354052:web:e959565f804cacd0ed691"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n'})}),"\n",(0,s.jsx)(t.p,{children:"Now, we are ready to start app development."}),"\n",(0,s.jsx)(t.h4,{id:"initialize-firebase",children:"Initialize Firebase"}),"\n",(0,s.jsxs)(t.p,{children:["Let's create a new file named ",(0,s.jsx)(t.strong,{children:"firebaseConfig.js"})," in our Expo project. Copy the initialization code from the previous step. If you haven't copied the code, you can get the initialization code from the Firebase: Project Overview -> Project Settings"]}),"\n",(0,s.jsxs)(t.p,{children:["Copy the code to the ",(0,s.jsx)(t.code,{children:"firebaseConfig.js"})," file and export the ",(0,s.jsx)(t.code,{children:"app"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="firebaseConfig.js',children:'import { initializeApp } from "firebase/app";\n\nconst firebaseConfig = {\n  apiKey: "AIzjSyA8Bh7rwerN4OGbVLedJ54hjWj6FHP3fqpegwQ",\n  authDomain: "shoppingapp-91ahe.firebaseapp.com",\n  databaseURL: "https://shoppingapp-91-rtdb.us-west1.firebasedatabase.app",\n  projectId: "shoppingapp-91ede",\n  storageBucket: "shoppingapp-91ede.appspot.com",\n  messagingSenderId: "1056464134052",\n  appId: "1:10864638354052:web:e959565f804cacd0ed691"\n};\n\n// Add export keyword here\nexport const app = initializeApp(firebaseConfig);\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"firebaseConfig"})," object contains the configuration settings required to initialize Firebase within the app. The ",(0,s.jsx)(t.code,{children:"initializeApp"})," function is called with the ",(0,s.jsx)(t.code,{children:"firebaseConfig"})," object as its parameter. This initializes Firebase within the application using the provided configuration. Finally, the initialized Firebase ",(0,s.jsx)(t.code,{children:"app"})," instance is exported using ",(0,s.jsx)(t.code,{children:"export const app"}),". This allows other parts of the application to import and use the initialized Firebase app for accessing Firebase services"]}),"\n",(0,s.jsx)(t.h4,{id:"shopping-app",children:"Shopping App"}),"\n",(0,s.jsxs)(t.p,{children:["Now, we are ready to start develope the shopping list app. We create two states for product and list items that we can show all shopping items in the ",(0,s.jsx)(t.code,{children:"FlatList"})," component. Open the ",(0,s.jsx)(t.code,{children:"App.js"})," file and create the following states:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="App.js"',children:"const [product, setProduct] = useState({\n  title: '',\n  amount: ''\n});\nconst [items, setItems] = useState([]);\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Next, we add two ",(0,s.jsx)(t.code,{children:"TextInput"})," components that are used to store entered values in the ",(0,s.jsx)(t.code,{children:"product"})," state's ",(0,s.jsx)(t.code,{children:"title"})," and ",(0,s.jsx)(t.code,{children:"amount"})," properties. We also add the ",(0,s.jsx)(t.code,{children:"Button"})," component that execute ",(0,s.jsx)(t.code,{children:"handleSave"})," function when the button is pressed."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:'title="App.js"',children:"const handleSave = () => {\n}\n\nreturn (  \n  <View style={styles.container}>\n    <TextInput \n      placeholder='Product name' \n      onChangeText={text => setProduct({...product, name: text})}\n      value={product.name}/>  \n    <TextInput \n      placeholder='Amount' \n      onChangeText={text => setProduct({...product, amount: text})}\n      value={product.amount}/>   \n    <Button onPress={handleSave} title=\"Save\" /> \n  </View>\n);\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Next, we implement the save functionality. Import the ",(0,s.jsx)(t.code,{children:"app"})," instance from the ",(0,s.jsx)(t.code,{children:"firebaseConfig"}),"."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="App.js"',children:"import { app } from './firebaseConfig';\n"})}),"\n",(0,s.jsxs)(t.p,{children:["To use realtime database, we have to intialize realtime database and get a reference to service using the ",(0,s.jsx)(t.code,{children:"getDatabase"})," method. Add the following import and call the ",(0,s.jsx)(t.code,{children:"getDatabase"})," method:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title ="App.js"',children:'import { getDatabase } from "firebase/database";\n\nconst database = getDatabase(app);\n'})}),"\n",(0,s.jsxs)(t.p,{children:["No, we are ready to use realtime database. The Database reference is needed to perform database operations. The ",(0,s.jsx)(t.code,{children:"ref"})," method creates a reference to a location in the Firebase realtime database. Data can be saved using the ",(0,s.jsx)(t.code,{children:"push"})," method. We have to add the following imports in our ",(0,s.jsx)(t.code,{children:"App"})," component."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title ="App.js"',children:'import { getDatabase, ref, push } from "firebase/database";\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Then we call the ",(0,s.jsx)(t.code,{children:"push"})," method in our ",(0,s.jsx)(t.code,{children:"handleSave"})," function. The first argument is a reference to location where data is saved. The second argument is data that is saved (",(0,s.jsx)(t.code,{children:"product"})," object). The ",(0,s.jsx)(t.code,{children:"push"})," method automatically generates unique id for items in the Firebase realtime database."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const handleSave = () => {\n  push(ref(database, 'items/'), product); \n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Let's also add check that empty products are not saved:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const handleSave = () => {\n  if (product.amount && product.name) {\n    push(ref(database, 'items/'), product);\n  }\n  else {\n    Alert.alert('Error', 'Type product and amount first');\n  }\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Now, if you save products, you should see these in your Firebase Realtime Database:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{src:a(8187).A+"",width:"442",height:"330"})}),"\n",(0,s.jsxs)(t.p,{children:["Data can be read by using ",(0,s.jsx)(t.code,{children:"onValue"})," that listens for data changes in the Firebase realtime database. In our case, it listens for changes to the data at the specified reference (",(0,s.jsx)(t.code,{children:"itemsRef"}),"). Whenever the data changes, the callback function provided (",(0,s.jsx)(t.code,{children:"(snapshot) => { ... }"}),") will be executed."]}),"\n",(0,s.jsxs)(t.p,{children:["Inside the callback function, ",(0,s.jsx)(t.code,{children:"snapshot.val()"})," retrieves the current value of the data at the specified reference. This data is a JavaScript object where the keys are the unique IDs of the items and the values are the shopping item objects. Then, we convert values of the fetched data into an array using ",(0,s.jsx)(t.code,{children:"Object.values(data)"})," and store that to the ",(0,s.jsx)(t.code,{children:"items"})," state."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",metastring:'title="App.js"',children:"// Import onValue & useEffect\nimport { useState, useEffect } from 'react';\nimport { getDatabase, push, ref, onValue } from 'firebase/database';\n\n// Execute onValue inside the useEffect\nuseEffect(() => {\n  const itemsRef = ref(database, 'items/');\n  onValue(itemsRef, (snapshot) => {\n    const data = snapshot.val();\n    setItems(Object.values(data));\n  })\n}, []);\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Finally, we add ",(0,s.jsx)(t.code,{children:"FlatList"})," component and display products that are saved to the ",(0,s.jsx)(t.code,{children:"items"})," state."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:'title="App.js"',children:"<FlatList \n  renderItem={({item}) => \n    <View style={styles.listcontainer}>\n      <Text style={{fontSize: 18}}>{item.name}, {item.amount}</Text>\n    </View>} \n  data={items} />      \n"})}),"\n",(0,s.jsx)(t.h3,{id:"read-more",children:"Read More"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Firebase Realtime Database documentation: ",(0,s.jsx)(t.a,{href:"https://firebase.google.com/docs/database",children:"https://firebase.google.com/docs/database"})]}),"\n",(0,s.jsxs)(t.li,{children:["Firebase Authentication: ",(0,s.jsx)(t.a,{href:"https://firebase.google.com/docs/auth",children:"https://firebase.google.com/docs/auth"})]}),"\n",(0,s.jsxs)(t.li,{children:["Supabase (Open source alternative to Firebase); ",(0,s.jsx)(t.a,{href:"https://supabase.com/",children:"https://supabase.com/"})]}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},5279:(e,t,a)=>{a.d(t,{A:()=>s});const s=a.p+"assets/images/firebase_app-3f2fe44551ae6c0bc8405c2bffb5a483.png"},6205:(e,t,a)=>{a.d(t,{A:()=>s});const s=a.p+"assets/images/firebase_app2-bab2729de62a8113432ab3f3c9a0183e.png"},8187:(e,t,a)=>{a.d(t,{A:()=>s});const s=a.p+"assets/images/items_collection-18b3902d92ded53d32b87bb4a7fe1c24.png"},9444:(e,t,a)=>{a.d(t,{A:()=>s});const s=a.p+"assets/images/shoppinglist-d1260a1134e5ec6f75030a0a303cb4be.png"},8453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>o});var s=a(6540);const n={},i=s.createContext(n);function r(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);